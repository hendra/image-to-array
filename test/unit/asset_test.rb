require File.dirname(__FILE__) + '/../test_helper'

class AssetTest < ActiveSupport::TestCase
  
  def test_upload_image
    expected = [65535,8738,44718,31868,7453,8224,10280,6168,46517,9509,11308,5397,18504,39064,6682,45746,45232,42662,21845,13364,15163,24929,12850,12079,13878,35723,16962,42148,35209,10794,18761,7710,49087,52942,62965,29298,50115,22616,26985,43433,12336,51657,62451,50629,58853,15934,48573,59881,17476,63479,34438,65021,41377,19532,61423,14392,47288,34695,30583,37522,10023,11051,22102,64507,15677,38293,43690,53199,35466,47802,50372,60395,60652,58339,46774,56026,44461,14135,11822,36237,56283,40092,15420,13621,37265,62194,57568,54227,63736,27242,51400,61680,63993,29812,17990,64250,17219,55255,52685,65278,25957,64764,54741,48830,57311,56540,37779,31354,30840,53456,43947,57054,52428,60138,50886,20303,20817,26214,23901,45489,61937,40863,20560,54484,23387,23644,55769,19275,59110,42405,38036,18247,49858]
    asset = Asset.new(valid_image_path)
    assert_equal expected, asset.to_colour_array
  end
  
  def test_sort
    asset = Asset.new(valid_image_path)
    assert_equal [3,1,2], asset.sort([1,1,2,3,3,3], 'desc')
  end
  
private

  def valid_image_path
    return  fixture_file_upload('../../public/images/rails.png', 'image/png')
  end

end

